"use strict";(self.webpackChunkaime_tma=self.webpackChunkaime_tma||[]).push([[8224],{21716:function(C,N,a){a.r(N),a.d(N,{default:function(){return De}});var $=a(15009),I=a.n($),H=a(99289),S=a.n(H),L=a(5574),m=a.n(L),c=a(67294),t={createContainer:"createContainer___yGcpe",createWrapper:"createWrapper___vMU_V",createHeader:"createHeader___psL1F",createSteps:"createSteps___vUPKT",createAvatarContainer:"createAvatarContainer___JZcqu",createAvatarUpload:"createAvatarUpload___lCWio",createAvatar:"createAvatar___Mz4y9",createAvatarMask:"createAvatarMask___oGp5k",createAvatarIcon:"createAvatarIcon___nNxpZ",createName:"createName___lsGAo",createDescription:"createDescription___v9tVu",createDescriptionTitle:"createDescriptionTitle___NoP19",createDescriptionContent:"createDescriptionContent___Ap86T",createDescriptionButton:"createDescriptionButton___G0LNP",createDescriptionButtonIcon:"createDescriptionButtonIcon___sjXJt",createContent:"createContent___rsuYN",createContentInput:"createContentInput___PyaYP",createRecordAction:"createRecordAction___mFpZF",createRecordButton:"createRecordButton___mGKo3",createRecordButtonIcon:"createRecordButtonIcon___wHsCM",createRecordButtonShadow:"createRecordButtonShadow___IEOTD",createRecordButtonShadowAnimation:"createRecordButtonShadowAnimation___Bhsbr",createRecordText:"createRecordText___LsBGS",createRecordAudioRecorder:"createRecordAudioRecorder___BWVzO",createRecordReadyAction:"createRecordReadyAction___OgcUL",createRecordReadyAudio:"createRecordReadyAudio___wqaJL",createRecordRetry:"createRecordRetry___rpJEd",createRecordRetryIcon:"createRecordRetryIcon___VuGHV",createRecordRetryText:"createRecordRetryText___CI3Fv",createRecordPlay:"createRecordPlay___LrFr4",createRecordPlayIcon:"createRecordPlayIcon___tM3jn",createRecordPlayText:"createRecordPlayText___KIDPD",createFooter:"createFooter___UwsF0",createFooterButton:"createFooterButton___ppM6Q"},O=a(701),x=a(82188),v={editBioModal:"editBioModal___g1s_S",editBioContainer:"editBioContainer___irj1_",editBioHeader:"editBioHeader___hSZv5",editBioHeaderIcon:"editBioHeaderIcon___V2lPD",editBioHeaderIconImg:"editBioHeaderIconImg___ajaKD",editBioHeaderTitle:"editBioHeaderTitle___Hdph4",editBioContent:"editBioContent___Pwfpk",editBioContentInput:"editBioContentInput___M8OgZ",editBioFooter:"editBioFooter___q3K0f",editBioFooterButton:"editBioFooterButton___xfKjg"},A=a(69025),g=a(25303),i=a(15867),e=a(85893),T=A.Z.TextArea,b=function(r){var l=r.visible,o=r.setVisible,_=r.bio,h=r.setBio,s=r.closeable;return(0,e.jsx)(g.Z,{centered:!0,title:null,footer:null,className:v.editBioModal,open:l,onCancel:function(){return o(!1)},closable:s??!1,maskClosable:s??!1,children:(0,e.jsxs)("div",{className:v.editBioContainer,children:[(0,e.jsxs)("div",{className:v.editBioHeader,children:[(0,e.jsx)("div",{className:v.editBioHeaderIcon,children:(0,e.jsx)("img",{className:v.editBioHeaderIconImg,src:a(62013),alt:"icon"})}),(0,e.jsx)("div",{className:v.editBioHeaderTitle,children:"Edit Bio"})]}),(0,e.jsx)("div",{className:v.editBioContent,children:(0,e.jsx)(T,{bordered:!1,className:v.editBioContentInput,showCount:!0,rows:6,maxLength:300,value:_||void 0,onChange:function(u){return h(u.target.value)}})}),(0,e.jsx)("div",{className:v.editBioFooter,children:(0,e.jsx)(i.ZP,{className:v.editBioFooterButton,type:"primary",shape:"round",size:"large",block:!0,onClick:function(){return o(!1)},children:"Done"})})]})})},M=b,se=a(40934),oe=a(46393),ne=a(88929),ce=a(9361),W=a(43958),ie=a(79352),le=a(1451),de=a(42887),ue=function(r){var l=r.avatar,o=r.setAvatar,_=r.bio,h=r.setBio,s=r.name,d=r.setName,u=r.setStep,D=c.useState(!1),P=m()(D,2),B=P[0],R=P[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:t.createWrapper,children:[(0,e.jsxs)("div",{className:t.createHeader,children:[(0,e.jsx)("div",{className:t.createSteps,children:"1 / 2"}),(0,e.jsx)("div",{className:t.createAvatarContainer,children:(0,e.jsx)(de.Z,{cropShape:"round",children:(0,e.jsxs)(se.Z,{accept:"image/*",className:t.createAvatarUpload,showUploadList:!1,beforeUpload:function(y){return o(y),!1},children:[(0,e.jsx)("div",{className:t.createAvatar,children:(0,e.jsx)(oe.Z,{className:t.createAvatarImage,src:l&&URL.createObjectURL(l)||void 0,fallback:a(41508),preview:!1})}),!l&&(0,e.jsx)("div",{className:t.createAvatarMask,children:(0,e.jsx)("span",{children:"Upload"})}),(0,e.jsx)("div",{className:t.createAvatarIcon,children:(0,e.jsx)(le.sws,{})})]})})}),(0,e.jsx)("div",{className:t.createName,children:s||"Your Name"}),(0,e.jsxs)("div",{className:t.createDescription,children:[(0,e.jsx)("div",{className:t.createDescriptionTitle,children:"Your AIME Bio"}),(0,e.jsx)("div",{className:t.createDescriptionContent,children:"I am a boring person, but I tend to be passionate about making money."}),(0,e.jsx)(ne.ZP,{theme:{algorithm:ce.Z.defaultAlgorithm,token:{wireframe:!1,colorPrimary:"#eeeeee",borderRadius:W.m.borderRadius,boxShadow:W.m.boxShadow}},children:(0,e.jsxs)(i.ZP,{type:"primary",shape:"round",className:t.createDescriptionButton,onClick:function(){return R(!0)},children:[(0,e.jsx)(ie.cpK,{className:t.createDescriptionButtonIcon}),(0,e.jsx)("span",{children:"Edit Bio"})]})})]})]}),(0,e.jsx)("div",{className:t.createFooter,children:(0,e.jsx)(i.ZP,{block:!0,size:"large",type:"primary",shape:"round",className:t.createFooterButton,disabled:!l||!_||!s,onClick:function(){u(2)},children:"Next"})})]}),(0,e.jsx)(M,{visible:B,setVisible:R,bio:_,setBio:h,closeable:!0})]})},me=ue,ve=a(9783),_e=a.n(ve),pe=a(53854),he=a(63750),Re=a(93967),xe=a.n(Re),z=a(42968),Y=a(51649),ge=a(60155),fe=A.Z.TextArea,je=function(r){var l=r.record,o=r.setRecord,_=c.useState(!1),h=m()(_,2),s=h[0],d=h[1],u=c.useState(!1),D=m()(u,2),P=D[0],B=D[1],R=(0,z.I)(),j=(0,c.useRef)(null);return(0,c.useEffect)(function(){R.recordingBlob&&!s&&o(R.recordingBlob)},[R.recordingBlob]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:t.createWrapper,children:[(0,e.jsxs)("div",{className:t.createHeader,children:[(0,e.jsx)("div",{className:t.createSteps,children:"2 / 2"}),(0,e.jsx)("div",{className:t.createName,children:"Record your voice by reading the paragraph below."}),(0,e.jsx)("div",{className:t.createContent,children:(0,e.jsx)(fe,{bordered:!1,className:t.createContentInput,rows:8,readOnly:!0,value:"The sun was setting, turning the sky pink and orange. Everywhere you looked, the world seemed to be covered in a warm, glowing light. Leaves on the trees moved softly in the wind, making a gentle rustling sound. Birds were chirping loudly, happy to be heading home."})}),l?(0,e.jsxs)("div",{className:t.createRecordReadyAction,children:[(0,e.jsx)("audio",{src:URL.createObjectURL(l),ref:j,className:t.createRecordReadyAudio}),(0,e.jsxs)("div",{className:t.createRecordRetry,children:[(0,e.jsx)(i.ZP,{type:"primary",shape:"circle",size:"large",className:t.createRecordRetryIcon,onClick:function(){var n;o(null),(n=j.current)===null||n===void 0||n.pause(),B(!1)},children:(0,e.jsx)(Y.Fer,{})}),(0,e.jsx)("div",{className:t.createRecordRetryText,children:"Retry"})]}),P?(0,e.jsxs)("div",{className:t.createRecordPlay,children:[(0,e.jsx)(i.ZP,{type:"primary",shape:"circle",size:"large",className:t.createRecordPlayIcon,onClick:function(){var n;(n=j.current)===null||n===void 0||n.pause(),B(!1)},children:(0,e.jsx)(Y.bGo,{})}),(0,e.jsx)("div",{className:t.createRecordPlayText,children:"Stop"})]}):(0,e.jsxs)("div",{className:t.createRecordPlay,children:[(0,e.jsx)(i.ZP,{type:"primary",shape:"circle",size:"large",className:t.createRecordPlayIcon,onClick:function(){var n;(n=j.current)===null||n===void 0||n.play(),B(!0)},children:(0,e.jsx)(ge.eU6,{})}),(0,e.jsx)("div",{className:t.createRecordPlayText,children:"Play"})]})]}):(0,e.jsxs)("div",{className:t.createRecordAction,children:[(0,e.jsx)(z.h,{onRecordingComplete:function(n){var Z=URL.createObjectURL(n),F=document.createElement("audio");F.src=Z,F.controls=!0,document.body.appendChild(F),console.log(n)},audioTrackConstraints:{noiseSuppression:!0,echoCancellation:!0},classes:{AudioRecorderClass:t.createRecordAudioRecorder}}),(0,e.jsxs)("div",{className:t.createRecordButton,children:[(0,e.jsx)(i.ZP,{type:"primary",shape:"circle",size:"large",className:t.createRecordButtonIcon,onClick:function(){d(!s),s?R.stopRecording():R.startRecording()},children:s?(0,e.jsx)(he.rD$,{}):(0,e.jsx)(pe.jDK,{})}),(0,e.jsx)("div",{className:xe()(t.createRecordButtonMask,_e()({},t.createRecordButtonShadowAnimation,s))})]}),(0,e.jsx)("div",{className:t.createRecordText,children:s?"Click to stop record":"Click to record audio"})]})]}),(0,e.jsx)("div",{className:t.createFooter,children:(0,e.jsx)(i.ZP,{block:!0,type:"primary",shape:"round",size:"large",className:t.createFooterButton,disabled:!l,children:"Save"})})]})})},ye=je,U={loadingModal:"loadingModal___iqmC4",loadingContainer:"loadingContainer___ICpP1",loadingImageContainer:"loadingImageContainer___jycbF",loadingImage:"loadingImage___yQKIB"},Be=a(22004),Ce=a.n(Be),Ne=function(r){var l=r.visible,o=r.setVisible;return(0,e.jsx)(g.Z,{centered:!0,title:null,footer:null,className:U.loadingModal,open:l,onCancel:function(){return o(!1)},closeIcon:null,width:300,children:(0,e.jsx)("div",{className:U.loadingContainer,children:(0,e.jsx)("div",{className:U.loadingImageContainer,children:(0,e.jsx)(Ce(),{className:U.loadingImage,url:a(28115),playing:!0,muted:!0,loop:!0,controls:!1})})})})},Ie=Ne,f={successModal:"successModal___JGcML",successContainer:"successContainer___IoNGR",successHeader:"successHeader___x3aRE",successHeaderIconSuccess:"successHeaderIconSuccess___TKOj2",successHeaderIconImg:"successHeaderIconImg___JSbDv",successHeaderTitle:"successHeaderTitle___VyZQK",successContent:"successContent___cGz1y",successFooter:"successFooter___mFgP4",successFooterBtn:"successFooterBtn___Ipz7j"},be=function(r){var l=r.visible,o=r.setVisible;return(0,e.jsx)(g.Z,{centered:!0,title:null,footer:null,className:f.successModal,open:l,onCancel:function(){return o(!1)},closeIcon:null,children:(0,e.jsxs)("div",{className:f.successContainer,children:[(0,e.jsxs)("div",{className:f.successHeader,children:[(0,e.jsx)("div",{className:f.successHeaderIconSuccess,children:(0,e.jsx)("img",{className:f.successHeaderIconImg,src:a(8690),alt:"icon"})}),(0,e.jsx)("div",{className:f.successHeaderTitle,children:"Congratulations"})]}),(0,e.jsx)("div",{className:f.successContent,children:"You have successfully created your AIME."}),(0,e.jsx)("div",{className:f.successFooter,children:(0,e.jsx)(i.ZP,{block:!0,type:"primary",className:f.successFooterBtn,size:"large",onClick:function(){o(!1),x.history.push("/me")},children:"OK"})})]})})},Pe=be,Se=a(45908),Ae=a(16568),Te=a(21621),Me=function(){var r,l=(0,x.useModel)("useAccess"),o=l.profile,_=l.accessToken,h=(0,x.useModel)("useTelegram"),s=h.telegramData,d=h.miniAppBackButton,u=h.miniAppMainButton,D=c.useState(1),P=m()(D,2),B=P[0],R=P[1],j=c.useState(null),y=m()(j,2),n=y[0],Z=y[1],F=c.useState((o==null?void 0:o.bio)||null),J=m()(F,2),w=J[0],Ee=J[1],Fe=c.useState((o==null?void 0:o.name)||(s==null||(r=s.user)===null||r===void 0?void 0:r.firstName)||(s==null?void 0:s.first_name)||null),Q=m()(Fe,2),X=Q[0],Ue=Q[1],$e=c.useState(null),q=m()($e,2),G=q[0],He=q[1],Le=c.useState(!1),ee=m()(Le,2),Oe=ee[0],K=ee[1],Ze=c.useState(!1),ae=m()(Ze,2),Ge=ae[0],Ke=ae[1];(0,c.useEffect)(function(){d&&(d==null||d.show(),d==null||d.on("click",function(){x.history.push("/me")}))},[d]),(0,c.useEffect)(function(){u&&(u==null||u.show(),u==null||u.on("click",function(){x.history.push("/")}))},[u]);var Ye=function(){var ke=S()(I()().mark(function te(){var k,re,Ve,V,We,ze;return I()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!n||!w||!X||!G||!_)){p.next=2;break}return p.abrupt("return");case 2:return K(!0),p.next=5,(0,Se.K)(n);case 5:if(k=p.sent,re=k.response,Ve=k.data,re.status===200){p.next=12;break}return K(!1),Ae.Z.error({key:"uploadAvatarFailed",message:"Upload avatar failed",description:"Please try again later"}),p.abrupt("return");case 12:return p.next=14,(0,Te.vF)(G,_);case 14:V=p.sent,We=V.response,ze=V.data;case 17:case"end":return p.stop()}},te)}));return function(){return ke.apply(this,arguments)}}();return(0,e.jsx)(O.$,{children:(0,e.jsxs)("div",{className:t.createContainer,children:[B===1&&(0,e.jsx)(me,{avatar:n,setAvatar:Z,bio:w,setBio:Ee,name:X,setName:Ue,setStep:R}),B===2&&(0,e.jsx)(ye,{record:G,setRecord:He}),(0,e.jsx)(Ie,{visible:Oe,setVisible:K}),(0,e.jsx)(Pe,{visible:Ge,setVisible:Ke})]})})},De=Me},45908:function(C,N,a){a.d(N,{K:function(){return v},j:function(){return O}});var $=a(15009),I=a.n($),H=a(97857),S=a.n(H),L=a(99289),m=a.n(L),c=a(88594),t=a(21621);function O(g,i){return x.apply(this,arguments)}function x(){return x=m()(I()().mark(function g(i,e){return I()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,t.WY)("https://api.coingecko.com/api/v3/simple/price?ids=".concat(i.token,"&vs_currencies=").concat(i.currency),S()(S()({method:"GET",headers:{"Content-Type":"application/json"},data:i},e||{}),{},{getResponse:!0})));case 1:case"end":return b.stop()}},g)})),x.apply(this,arguments)}function v(g,i){return A.apply(this,arguments)}function A(){return A=m()(I()().mark(function g(i,e){var T;return I()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return T=new FormData,T.append("file",i),M.abrupt("return",(0,t.WY)("https://".concat(c.x$.host).concat(c.x$.upload),S()(S()({method:"POST",data:T},e||{}),{},{requestType:"form",getResponse:!0})));case 3:case"end":return M.stop()}},g)})),A.apply(this,arguments)}},28115:function(C,N,a){C.exports=a.p+"static/loading.a48ed896.webm"},8690:function(C,N,a){C.exports=a.p+"static/success.12b3fb0d.png"},62013:function(C,N,a){C.exports=a.p+"static/edit.a8df050e.png"}}]);
